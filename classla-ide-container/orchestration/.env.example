# =============================================================================
# IDE Container Orchestration - Environment Configuration
# =============================================================================
# Copy this file to .env and update with your actual values
# All values are required unless marked as optional

# -----------------------------------------------------------------------------
# Domain Configuration
# -----------------------------------------------------------------------------
# Your domain name for the IDE containers
# Wildcard DNS (*.ide.example.com) should point to your VPS IP
DOMAIN=ide.example.com

# Email address for Let's Encrypt certificate notifications
ACME_EMAIL=admin@example.com

# -----------------------------------------------------------------------------
# Docker Registry Configuration (optional)
# -----------------------------------------------------------------------------
# Docker registry for the management API image
# Leave empty to use local images
REGISTRY=
# Image version tag (default: latest)
VERSION=latest

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# API key for authenticating requests to the management API
# Multiple keys can be provided separated by commas
# Keys are hashed using SHA-256 before storage
# Generate secure keys with: openssl rand -base64 32
# Example: API_KEY=key1,key2,key3
API_KEY=your-secure-api-key-here

# -----------------------------------------------------------------------------
# AWS Configuration
# -----------------------------------------------------------------------------
# AWS region for S3 buckets (default: us-east-1)
AWS_REGION=us-east-1

# AWS credentials (optional if using IAM role on EC2/ECS)
# Prefer IAM roles over hardcoded credentials when possible
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Node environment (production, development)
NODE_ENV=production

# Port for the management API (internal, exposed via Traefik)
PORT=3001

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Resource Limits
# -----------------------------------------------------------------------------
# CPU cores per container (default: 2)
RESOURCE_CPU_LIMIT=2

# Memory limit per container in bytes (default: 4GB = 4294967296)
RESOURCE_MEMORY_LIMIT=4294967296

# System-wide CPU usage threshold percentage (default: 90)
# New containers will be rejected when exceeded
MAX_CPU_PERCENT=90

# System-wide memory usage threshold percentage (default: 90)
# New containers will be rejected when exceeded
MAX_MEMORY_PERCENT=90

# -----------------------------------------------------------------------------
# Health Monitoring
# -----------------------------------------------------------------------------
# Interval between health checks in milliseconds (default: 30000 = 30 seconds)
HEALTH_CHECK_INTERVAL=30000

# Timeout for health check requests in milliseconds (default: 5000 = 5 seconds)
HEALTH_CHECK_TIMEOUT=5000

# Number of consecutive failures before marking container unhealthy (default: 3)
HEALTH_CHECK_RETRIES=3

# -----------------------------------------------------------------------------
# Container Configuration
# -----------------------------------------------------------------------------
# Docker restart policy for containers (on-failure, always, unless-stopped)
CONTAINER_RESTART_POLICY=on-failure

# Maximum restart attempts for containers (default: 3)
CONTAINER_RESTART_MAX_ATTEMPTS=3

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Path to SQLite database file (inside container)
DATABASE_PATH=/app/data/containers.db
