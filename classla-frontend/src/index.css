@tailwind base;
@tailwind components;
@tailwind utilities;

/* Test if Tailwind is working */
.test-red {
  @apply bg-red-500 text-white p-4;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 262.1 83.3% 57.8%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 84% 4.9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 262.1 83.3% 57.8%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 262.1 83.3% 57.8%;
    --primary-foreground: 210 40% 98%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 262.1 83.3% 57.8%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }
}

/* TipTap Editor List Styles */
@layer components {
  /* Reset prose margins for consistent text styling */
  .assignment-editor-content.prose p,
  .assignment-viewer-content.prose p {
    margin: 0;
  }

  .assignment-editor-content.prose h1,
  .assignment-viewer-content.prose h1,
  .assignment-editor-content.prose h2,
  .assignment-viewer-content.prose h2,
  .assignment-editor-content.prose h3,
  .assignment-viewer-content.prose h3,
  .assignment-editor-content.prose h4,
  .assignment-viewer-content.prose h4,
  .assignment-editor-content.prose h5,
  .assignment-viewer-content.prose h5,
  .assignment-editor-content.prose h6,
  .assignment-viewer-content.prose h6 {
    margin: 0;
  }

  .assignment-editor-content.prose h1:first-child,
  .assignment-viewer-content.prose h1:first-child,
  .assignment-editor-content.prose h2:first-child,
  .assignment-viewer-content.prose h2:first-child,
  .assignment-editor-content.prose h3:first-child,
  .assignment-viewer-content.prose h3:first-child,
  .assignment-editor-content.prose h4:first-child,
  .assignment-viewer-content.prose h4:first-child,
  .assignment-editor-content.prose h5:first-child,
  .assignment-viewer-content.prose h5:first-child,
  .assignment-editor-content.prose h6:first-child,
  .assignment-viewer-content.prose h6:first-child,
  .assignment-editor-content.prose p:first-child,
  .assignment-viewer-content.prose p:first-child {
    margin-top: 0;
  }

  .assignment-editor-content.prose blockquote,
  .assignment-viewer-content.prose blockquote {
    margin: 0;
    padding-left: 1rem;
    border-left: 4px solid #e5e7eb;
  }

  .assignment-editor-content.prose pre,
  .assignment-viewer-content.prose pre {
    margin: 0;
  }

  .assignment-editor-content.prose hr,
  .assignment-viewer-content.prose hr {
    margin: 0;
  }
  .ProseMirror ul,
  .assignment-editor-content ul,
  .assignment-viewer-content ul,
  .prose ul {
    list-style-type: disc;
    margin-left: 2rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1rem;
  }

  .ProseMirror ol,
  .assignment-editor-content ol,
  .assignment-viewer-content ol,
  .prose ol {
    list-style-type: decimal;
    margin-left: 2rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1rem;
  }

  .ProseMirror ul li,
  .assignment-editor-content ul li,
  .assignment-viewer-content ul li,
  .prose ul li {
    display: list-item;
    margin-left: 0;
    padding-left: 0.5rem;
    position: relative;
  }

  .ProseMirror ol li,
  .assignment-editor-content ol li,
  .assignment-viewer-content ol li,
  .prose ol li {
    display: list-item;
    margin-left: 0;
    padding-left: 0.5rem;
    position: relative;
  }

  /* Nested lists */
  .ProseMirror ul ul,
  .assignment-editor-content ul ul,
  .assignment-viewer-content ul ul,
  .prose ul ul {
    list-style-type: circle;
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
  }

  .ProseMirror ul ul ul,
  .assignment-editor-content ul ul ul,
  .assignment-viewer-content ul ul ul,
  .prose ul ul ul {
    list-style-type: square;
  }

  .ProseMirror ol ol,
  .assignment-editor-content ol ol,
  .assignment-viewer-content ol ol,
  .prose ol ol {
    list-style-type: lower-alpha;
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
  }

  .ProseMirror ol ol ol,
  .assignment-editor-content ol ol ol,
  .assignment-viewer-content ol ol ol,
  .prose ol ol ol {
    list-style-type: lower-roman;
  }

  /* Task lists */
  .ProseMirror ul[data-type="taskList"],
  .assignment-editor-content ul[data-type="taskList"],
  .assignment-viewer-content ul[data-type="taskList"],
  .prose ul[data-type="taskList"] {
    list-style: none;
    margin-left: 0;
    padding-left: 0;
  }

  .ProseMirror ul[data-type="taskList"] li,
  .assignment-editor-content ul[data-type="taskList"] li,
  .assignment-viewer-content ul[data-type="taskList"] li,
  .prose ul[data-type="taskList"] li {
    display: flex;
    align-items: flex-start;
    margin-left: 0;
    margin-bottom: 0;
    margin-top: 0;
    padding-left: 0;
  }

  .ProseMirror ul[data-type="taskList"] li > label,
  .assignment-editor-content ul[data-type="taskList"] li > label,
  .assignment-viewer-content ul[data-type="taskList"] li > label,
  .prose ul[data-type="taskList"] li > label {
    margin-right: 0.5rem;
    margin-top: 0;
    margin-bottom: 0;
    flex-shrink: 0;
  }

  .ProseMirror ul[data-type="taskList"] li > div,
  .assignment-editor-content ul[data-type="taskList"] li > div,
  .assignment-viewer-content ul[data-type="taskList"] li > div,
  .prose ul[data-type="taskList"] li > div {
    flex: 1;
    margin: 0;
  }

  /* Ensure list markers are visible */
  .ProseMirror,
  .assignment-editor-content,
  .assignment-viewer-content,
  .prose {
    overflow-wrap: break-word;
  }

  /* Consistent ProseMirror content styling */
  .assignment-editor-content .ProseMirror,
  .assignment-viewer-content .ProseMirror {
    outline: none;
  }

  .assignment-editor-content .ProseMirror > *:first-child,
  .assignment-viewer-content .ProseMirror > *:first-child {
    margin-top: 0 !important;
  }

  .assignment-editor-content .ProseMirror > *:last-child,
  .assignment-viewer-content .ProseMirror > *:last-child {
    margin-bottom: 0 !important;
  }

  .assignment-editor-content .ProseMirror p,
  .assignment-viewer-content .ProseMirror p {
    margin: 0;
  }

  .assignment-editor-content .ProseMirror h1,
  .assignment-viewer-content .ProseMirror h1,
  .assignment-editor-content .ProseMirror h2,
  .assignment-viewer-content .ProseMirror h2,
  .assignment-editor-content .ProseMirror h3,
  .assignment-viewer-content .ProseMirror h3,
  .assignment-editor-content .ProseMirror h4,
  .assignment-viewer-content .ProseMirror h4,
  .assignment-editor-content .ProseMirror h5,
  .assignment-viewer-content .ProseMirror h5,
  .assignment-editor-content .ProseMirror h6,
  .assignment-viewer-content .ProseMirror h6 {
    margin: 0;
  }

  .ProseMirror ul,
  .ProseMirror ol,
  .assignment-editor-content ul,
  .assignment-editor-content ol,
  .assignment-viewer-content ul,
  .assignment-viewer-content ol,
  .prose ul,
  .prose ol {
    position: relative;
  }

  /* Force list markers to show - override any resets */
  .ProseMirror ul li::marker,
  .assignment-editor-content ul li::marker,
  .assignment-viewer-content ul li::marker,
  .prose ul li::marker {
    content: "•";
    color: currentColor;
    font-size: 1em;
    font-weight: normal;
  }

  .ProseMirror ol li::marker,
  .assignment-editor-content ol li::marker,
  .assignment-viewer-content ol li::marker,
  .prose ol li::marker {
    color: currentColor;
    font-size: 1em;
    font-weight: 500;
  }

  /* Alternative approach using pseudo-elements if markers don't work */
  .ProseMirror ul:not([data-type="taskList"]) li,
  .assignment-editor-content ul:not([data-type="taskList"]) li,
  .assignment-viewer-content ul:not([data-type="taskList"]) li,
  .prose ul:not([data-type="taskList"]) li {
    position: relative;
  }

  /* Ensure proper spacing and visibility */
  .ProseMirror ul li,
  .ProseMirror ol li,
  .assignment-editor-content ul li,
  .assignment-editor-content ol li,
  .assignment-viewer-content ul li,
  .assignment-viewer-content ol li,
  .prose ul li,
  .prose ol li {
    margin-bottom: 0;
    line-height: 1.6;
  }

  /* Override Tailwind preflight that might be hiding markers */
  .ProseMirror ul,
  .assignment-editor-content ul,
  .assignment-viewer-content ul,
  .prose ul,
  .tiptap-bullet-list {
    list-style: disc outside;
  }

  .ProseMirror ol,
  .assignment-editor-content ol,
  .assignment-viewer-content ol,
  .prose ol,
  .tiptap-ordered-list {
    list-style: decimal outside;
  }

  /* Specific TipTap list styles */
  .tiptap-bullet-list {
    margin-left: 2rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1rem;
  }

  .tiptap-ordered-list {
    margin-left: 2rem;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1rem;
  }

  .tiptap-list-item {
    display: list-item;
    margin-left: 0;
    padding-left: 0.5rem;
    margin-bottom: 0;
    line-height: 1.6;
    position: relative;
  }

  /* Enhanced bullet styling with normal sized, better positioned markers */
  .ProseMirror ul:not([data-type="taskList"]) li::marker,
  .assignment-editor-content ul:not([data-type="taskList"]) li::marker,
  .assignment-viewer-content ul:not([data-type="taskList"]) li::marker,
  .prose ul:not([data-type="taskList"]) li::marker,
  .tiptap-bullet-list .tiptap-list-item::marker {
    content: "•";
    color: #374151;
    font-size: 1em;
    font-weight: normal;
  }

  .ProseMirror ol li::marker,
  .assignment-editor-content ol li::marker,
  .assignment-viewer-content ol li::marker,
  .prose ol li::marker,
  .tiptap-ordered-list .tiptap-list-item::marker {
    color: #374151;
    font-size: 1em;
    font-weight: 500;
  }

  /* Nested list styling with different bullet types */
  .ProseMirror ul ul li::marker,
  .assignment-editor-content ul ul li::marker,
  .assignment-viewer-content ul ul li::marker,
  .prose ul ul li::marker {
    content: "◦";
    font-size: 1em;
  }

  .ProseMirror ul ul ul li::marker,
  .assignment-editor-content ul ul ul li::marker,
  .assignment-viewer-content ul ul ul li::marker,
  .prose ul ul ul li::marker {
    content: "▪";
    font-size: 1em;
  }
}

/* Allotment Customization */
:root {
  --focus-border: #9333ea; /* Purple-600 to match theme */
  --separator-border: #d1d5db; /* Gray-300 */
}

/* Make the sash more visible and easier to grab */
.split-view .sash {
  background-color: transparent;
}

.split-view .sash:hover,
.split-view .sash-hover {
  background-color: rgba(147, 51, 234, 0.1); /* Purple with opacity */
}

.split-view .sash-active {
  background-color: rgba(147, 51, 234, 0.2); /* Darker purple when dragging */
}

/* Increase the hit area for better UX */
.split-view-horizontal > .sash-container > .sash {
  width: 8px;
  margin-left: -4px;
  margin-right: -4px;
}

.split-view-vertical > .sash-container > .sash {
  height: 8px;
  margin-top: -4px;
  margin-bottom: -4px;
}
